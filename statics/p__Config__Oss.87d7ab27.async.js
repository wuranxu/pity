"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[4092],{47046:function(C,o){var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};o.Z=t},51042:function(C,o,t){var v=t(1413),c=t(67294),S=t(42110),I=t(84089),y=function(N,g){return c.createElement(I.Z,(0,v.Z)((0,v.Z)({},N),{},{ref:g,icon:S.Z}))};y.displayName="PlusOutlined",o.Z=c.forwardRef(y)},12554:function(C,o,t){t.d(o,{Z:function(){return O}});var v=t(67294),c=t(98293),S=t(83062),I={menu:"menu___lmCy5",right:"right___j6QWS",action:"action___qDzB9",search:"search___XbFIL",account:"account___t6Nrx",avatar:"avatar___B76fn",dark:"dark___VDMBa","ant-badge-count-sm":"ant-badge-count-sm___oPFlX"},y=t(19478),h=Object.defineProperty,N=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,L=(a,u,i)=>u in a?h(a,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[u]=i,T=(a,u)=>{for(var i in u||(u={}))g.call(u,i)&&L(a,i,u[i]);if(N)for(var i of N(u))z.call(u,i)&&L(a,i,u[i]);return a};const U=a=>React.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",xmlSpace:"preserve"},a),React.createElement("linearGradient",{id:"logo_svg__a",gradientUnits:"userSpaceOnUse",x1:413.111,y1:255.835,x2:145.446,y2:255.835},React.createElement("stop",{offset:.034,style:{stopColor:"#e700e6"}}),React.createElement("stop",{offset:1,style:{stopColor:"#29abe2"}})),React.createElement("path",{fill:"url(#logo_svg__a)",d:"m475.4 248.3-93.7-124.9c0-.1-.1-.1-.2-.2-.2-.2-.4-.5-.6-.7l-.3-.3-.8-.8c-.1 0-.1-.1-.2-.2-.3-.3-.7-.5-1.1-.8-.1-.1-.2-.1-.3-.2-.3-.2-.6-.4-.9-.5-.1-.1-.2-.1-.4-.2-.3-.1-.6-.3-.9-.4-.1 0-.3-.1-.4-.1l-.9-.3c-.1 0-.3-.1-.4-.1-.3-.1-.7-.1-1-.2-.1 0-.2 0-.4-.1-.5-.1-.9-.1-1.4-.1H117.6c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h79.5c4.8 0 8.7 3.9 8.7 8.8 0 2.4-1 4.6-2.6 6.2-1.6 1.6-3.8 2.6-6.2 2.6H72.2c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h90.1c7.6 0 13.7 6.2 13.7 13.7 0 3.8-1.5 7.2-4 9.7-2.5 2.5-5.8 4-9.6 4H28.5c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h83.3c9.6 0 17.5 7.9 17.5 17.5 0 4.8-2 9.2-5.1 12.4-3.2 3.2-7.5 5.1-12.3 5.1h-52c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5H157c3.9 0 7.5 1.2 10.4 3.3 3.4 2.3 6.1 5.8 7.3 9.8.6 1.8.9 3.7.9 5.8 0 5.2-2.1 9.9-5.5 13.3-3.4 3.4-8.1 5.5-13.3 5.5H123c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5H201.9c2 0 3.6 1.6 3.6 3.6 0 1-.4 1.9-1.1 2.6-.6.7-1.6 1.1-2.5 1.1h-17.1c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h186.8c.5 0 1 0 1.5-.1s.9-.1 1.3-.2c.1 0 .1 0 .2-.1.4-.1.8-.2 1.1-.3.1 0 .2-.1.2-.1.4-.1.7-.3 1-.4.1 0 .2-.1.2-.1.3-.2.7-.4 1-.6.1 0 .1-.1.2-.1.4-.3.8-.5 1.1-.8l.1-.1c.3-.3.6-.5.9-.8l.3-.3c.2-.2.4-.4.6-.7l.2-.2 93.7-124.9c3.5-4.5 3.5-10.6.2-15.1zM288 143.4h58.7l-37.5 50-37.5-50H288zm-109.2 98.8 13-17.3 34.7-46.4 5.3-7.1 14.9-19.8 6.3 8.4 40.5 54-21.9 29.2H178l.8-1zM253 368.3l-15.8-21-40.6-54.1-9.9-13.2-8.7-11.6h93.7l75 100H253zm169.3-75.8L392 255.8l-13.4 19.1 29.9 36.1-36.7 49-78.1-104.1 78.1-104.1 78.1 104.1-27.6 36.6z"}),React.createElement("linearGradient",{id:"logo_svg__b",gradientUnits:"userSpaceOnUse",x1:413.111,y1:166.309,x2:145.445,y2:166.309},React.createElement("stop",{offset:.034,style:{stopColor:"#e700e6"}}),React.createElement("stop",{offset:1,style:{stopColor:"#29abe2"}})),React.createElement("path",{fill:"url(#logo_svg__b)",d:"M331.9 152.6h-42.7l20.6 27.4z"}));var p="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MDAgNTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDEzLjExMSIgeTE9IjI1NS44MzUiIHgyPSIxNDUuNDQ2IiB5Mj0iMjU1LjgzNSI+PHN0b3Agb2Zmc2V0PSIuMDM0IiBzdHlsZT0ic3RvcC1jb2xvcjojZTcwMGU2Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojMjlhYmUyIi8+PC9saW5lYXJHcmFkaWVudD48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJtNDc1LjQgMjQ4LjMtOTMuNy0xMjQuOWMwLS4xLS4xLS4xLS4yLS4yLS4yLS4yLS40LS41LS42LS43bC0uMy0uMy0uOC0uOGMtLjEgMC0uMS0uMS0uMi0uMi0uMy0uMy0uNy0uNS0xLjEtLjgtLjEtLjEtLjItLjEtLjMtLjItLjMtLjItLjYtLjQtLjktLjUtLjEtLjEtLjItLjEtLjQtLjItLjMtLjEtLjYtLjMtLjktLjQtLjEgMC0uMy0uMS0uNC0uMWwtLjktLjNjLS4xIDAtLjMtLjEtLjQtLjEtLjMtLjEtLjctLjEtMS0uMi0uMSAwLS4yIDAtLjQtLjEtLjUtLjEtLjktLjEtMS40LS4xSDExNy42Yy02LjkgMC0xMi41IDUuNi0xMi41IDEyLjVzNS42IDEyLjUgMTIuNSAxMi41aDc5LjVjNC44IDAgOC43IDMuOSA4LjcgOC44IDAgMi40LTEgNC42LTIuNiA2LjItMS42IDEuNi0zLjggMi42LTYuMiAyLjZINzIuMmMtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNWg5MC4xYzcuNiAwIDEzLjcgNi4yIDEzLjcgMTMuNyAwIDMuOC0xLjUgNy4yLTQgOS43LTIuNSAyLjUtNS44IDQtOS42IDRIMjguNWMtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNWg4My4zYzkuNiAwIDE3LjUgNy45IDE3LjUgMTcuNSAwIDQuOC0yIDkuMi01LjEgMTIuNC0zLjIgMy4yLTcuNSA1LjEtMTIuMyA1LjFoLTUyYy02LjkgMC0xMi41IDUuNi0xMi41IDEyLjVzNS42IDEyLjUgMTIuNSAxMi41SDE1N2MzLjkgMCA3LjUgMS4yIDEwLjQgMy4zIDMuNCAyLjMgNi4xIDUuOCA3LjMgOS44LjYgMS44LjkgMy43LjkgNS44IDAgNS4yLTIuMSA5LjktNS41IDEzLjMtMy40IDMuNC04LjEgNS41LTEzLjMgNS41SDEyM2MtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNUgyMDEuOWMyIDAgMy42IDEuNiAzLjYgMy42IDAgMS0uNCAxLjktMS4xIDIuNi0uNi43LTEuNiAxLjEtMi41IDEuMWgtMTcuMWMtNi45IDAtMTIuNSA1LjYtMTIuNSAxMi41czUuNiAxMi41IDEyLjUgMTIuNWgxODYuOGMuNSAwIDEgMCAxLjUtLjFzLjktLjEgMS4zLS4yYy4xIDAgLjEgMCAuMi0uMS40LS4xLjgtLjIgMS4xLS4zLjEgMCAuMi0uMS4yLS4xLjQtLjEuNy0uMyAxLS40LjEgMCAuMi0uMS4yLS4xLjMtLjIuNy0uNCAxLS42LjEgMCAuMS0uMS4yLS4xLjQtLjMuOC0uNSAxLjEtLjhsLjEtLjFjLjMtLjMuNi0uNS45LS44bC4zLS4zYy4yLS4yLjQtLjQuNi0uN2wuMi0uMiA5My43LTEyNC45YzMuNS00LjUgMy41LTEwLjYuMi0xNS4xek0yODggMTQzLjRoNTguN2wtMzcuNSA1MC0zNy41LTUwSDI4OHptLTEwOS4yIDk4LjggMTMtMTcuMyAzNC43LTQ2LjQgNS4zLTcuMSAxNC45LTE5LjggNi4zIDguNCA0MC41IDU0LTIxLjkgMjkuMkgxNzhsLjgtMXpNMjUzIDM2OC4zbC0xNS44LTIxLTQwLjYtNTQuMS05LjktMTMuMi04LjctMTEuNmg5My43bDc1IDEwMEgyNTN6bTE2OS4zLTc1LjhMMzkyIDI1NS44bC0xMy40IDE5LjEgMjkuOSAzNi4xLTM2LjcgNDktNzguMS0xMDQuMSA3OC4xLTEwNC4xIDc4LjEgMTA0LjEtMjcuNiAzNi42eiIvPjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI0MTMuMTExIiB5MT0iMTY2LjMwOSIgeDI9IjE0NS40NDUiIHkyPSIxNjYuMzA5Ij48c3RvcCBvZmZzZXQ9Ii4wMzQiIHN0eWxlPSJzdG9wLWNvbG9yOiNlNzAwZTYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiMyOWFiZTIiLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0zMzEuOSAxNTIuNmgtNDIuN2wyMC42IDI3LjR6Ii8+PC9zdmc+",l=t(85893),O=function(a){var u=a.user,i=a.size,D=i===void 0?24:i,x=a.marginLeft,s=x===void 0?6:x;return u===void 0?(0,l.jsx)(c.C,{size:D,src:p,alt:"avatar"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.C,{size:D,className:I.avatar,src:u.avatar||y.Z.AVATAR_URL,alt:"avatar"}),(0,l.jsx)(S.Z,{title:"\u70B9\u51FB\u53EF\u67E5\u770B\u7528\u6237\u8D44\u6599",children:u.deleted_at?(0,l.jsx)("del",{children:(0,l.jsx)("a",{style:{marginLeft:s,fontSize:13,color:"#ccc"},href:"/#/member/".concat(u.id),rel:"noreferrer",children:u.name})}):(0,l.jsx)("a",{onClick:function(F){F.stopPropagation()},style:{marginLeft:s,fontSize:13,verticalAlign:"middle"},href:"/#/member/".concat(u.id),rel:"noreferrer",children:u.name})})]})}},3475:function(C,o,t){t.r(o),t.d(o,{default:function(){return _}});var v=t(97857),c=t.n(v),S=t(15009),I=t.n(S),y=t(99289),h=t.n(y),N=t(5574),g=t.n(N),z=t(58841),L=t(58131),T=t(96074),U=t(4393),p=t(69400),l=t(96365),O=t(66476),a=t(71230),u=t(15746),i=t(71577),D=t(64240),x=t(1413),s=t(67294),P={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},F=P,G=t(84089),B=function(j,m){return s.createElement(G.Z,(0,x.Z)((0,x.Z)({},j),{},{ref:m,icon:F}))};B.displayName="InboxOutlined";var X=s.forwardRef(B),J=t(51042),R=t(19478),K=t(94171),$=t(12554),e=t(85893),q=function(j){var m=j.loading,M=j.dispatch,W=j.gconfig,tt=j.user,et=L.Z.useForm(),ut=g()(et,1),H=ut[0],Y=W.ossFileList,nt=W.searchOssFileList,at=(0,s.useState)(!1),b=g()(at,2),it=b[0],Z=b[1],rt=(0,s.useState)(""),Q=g()(rt,2),A=Q[0],w=Q[1],lt=tt.userMap,st=function(){M({type:"user/fetchUserList"})},ot=function(n){M({type:"gconfig/removeOssFile",payload:{filepath:n.file_path}})},V=function(){M({type:"gconfig/listOssFile"})},ct=[{title:"\u6587\u4EF6\u8DEF\u5F84",key:"file_path",dataIndex:"file_path",render:function(n,f){return(0,e.jsx)("a",{href:f.view_url,target:"_blank",children:n})}},{title:"\u5927\u5C0F",key:"file_size",dataIndex:"file_size"},{title:"\u521B\u5EFA\u4EBA",key:"create_user",dataIndex:"create_user",render:function(n){return(0,e.jsx)($.Z,{user:lt[n]})}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updated_at",dataIndex:"updated_at"},{title:"\u64CD\u4F5C",key:"ops",render:function(n){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){window.open("".concat(R.Z.URL,"/oss/download?filepath=").concat(n.file_path))},children:"\u4E0B\u8F7D"}),(0,e.jsx)(T.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:function(){ot(n)},children:"\u5220\u9664"})]})}}],Lt=function(n){return Array.isArray(n)?n:n&&n.fileList},jt=function(){var r=h()(I()().mark(function n(){var f,k;return I()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,H.validateFields();case 2:return f=d.sent,d.next=5,M({type:"gconfig/uploadFile",payload:f});case 5:k=d.sent,k&&(Z(!1),w(""),V());case 7:case"end":return d.stop()}},n)}));return function(){return r.apply(this,arguments)}}();return(0,s.useEffect)(function(){M(A===""?{type:"gconfig/save",payload:{searchOssFileList:Y}}:{type:"gconfig/save",payload:{searchOssFileList:Y.filter(function(r){return r.file_path.toLowerCase().indexOf(A.toLowerCase())>-1})}})},[A]),(0,s.useEffect)(function(){V(),st()},[]),(0,e.jsx)(z._z,{title:"OSS\u6587\u4EF6\u7BA1\u7406",breadcrumb:null,children:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(p.Z,{width:600,title:"\u4E0A\u4F20\u6587\u4EF6",open:it,onCancel:function(){return Z(!1)},onOk:jt,children:(0,e.jsxs)(L.Z,c()(c()({form:H},R.Z.SQL_LAYOUT),{},{children:[(0,e.jsx)(L.Z.Item,{label:"\u6587\u4EF6\u8DEF\u5F84",name:"filepath",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u8981\u5B58\u50A8\u7684\u8DEF\u5F84, \u76EE\u5F55\u7528/\u9694\u5F00"}],children:(0,e.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u8981\u5B58\u50A8\u7684\u8DEF\u5F84, \u76EE\u5F55\u7528/\u9694\u5F00"})}),(0,e.jsx)(L.Z.Item,{label:"\u6587\u4EF6",required:!0,children:(0,e.jsx)(L.Z.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:Lt,noStyle:!0,rules:[{required:!0,message:"\u8BF7\u81F3\u5C11\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6"}],children:(0,e.jsxs)(O.Z.Dragger,{name:"files",maxCount:1,beforeUpload:function(){return!1},children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(X,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u4E0A\u4F20\u{1F389}"})]})})})]}))}),(0,e.jsxs)(a.Z,{gutter:[8,8],style:{marginBottom:12},children:[(0,e.jsx)(u.Z,{span:6,children:(0,e.jsxs)(i.ZP,{type:"primary",onClick:function(){return Z(!0)},children:[(0,e.jsx)(J.Z,{}),"\u6DFB\u52A0\u6587\u4EF6"]})}),(0,e.jsx)(u.Z,{span:12}),(0,e.jsx)(u.Z,{span:6,children:(0,e.jsx)(l.Z,{placeholder:"\u8F93\u5165\u8981\u67E5\u627E\u7684\u6587\u4EF6\u540D",value:A,onChange:function(n){w(n.target.value)}})})]}),(0,e.jsx)(D.Z,{rowKey:function(n){return n.key},dataSource:nt,columns:ct,loading:m.effects["gconfig/listOssFile"]})]})})},_=(0,K.connect)(function(E){var j=E.loading,m=E.gconfig,M=E.user;return{loading:j,gconfig:m,user:M}})(q)}}]);
